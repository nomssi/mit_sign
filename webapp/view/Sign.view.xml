<core:View xmlns:layout="sap.ui.layout" xmlns:form="sap.ui.layout.form" 
           xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" 
           xmlns:C="mit_sign.controls" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout" 
           controllerName="mit_sign.controller.Sign" xmlns:html="http://www.w3.org/1999/xhtml">	
	<NavContainer id="wizardNavContainer">
		<pages>
			<Page id="wizardContentPage" showHeader="true" title="{i18n>signTitle}  {Vbeln}">
				<landmarkInfo>
					<PageAccessibleLandmarkInfo
							rootRole="Region" rootLabel="{i18n>Checkout_rootLabel}"
							contentRole="Main" contentLabel="{i18n>Checkout_summaryContentLabel}"
							footerRole="Banner" footerLabel="{i18n>Checkout_footerLabel}"/>
				</landmarkInfo>				
				<headerContent>
					<Button id="homeButton" type="Emphasized" text="{i18n>homeButtonText}" press=".onBack"/>
					<Button id="settingsButton" type="Emphasized" text="{i18n>settingsButtonText}" press=".onSettingsButtonPress"/>
				</headerContent>
				<content>
					<Wizard id="signWizard" complete="signingCompleted"
					        finishButtonText="{i18n>checkoutWizardReviewbtn}">
						<steps>
							<WizardStep id="contentStep" 
							            nextStep="signReleaserStep" 
							            icon="sap-icon://detail-view" 
							            complete="onCompleteSigning" validated="true" 
							            title="{i18n>contentTitle} {VBELN}">
			    			<MessageStrip class="sapUiSmallMarginBottom"
										text="{i18n>strip.Review}"
										showIcon="true"/>									
								<Table id="lDelPos" inset="false" alternateRowColors="true" 
								       noDataText="{i18n>homeNoData}" busyIndicatorDelay="0" 
								      items="{EventPositions}" class="sapUiForceWidthAuto sapUiResponsiveMargin">
									<headerToolbar>
									</headerToolbar>
									<columns>
										<Column width="10em">
											<Text text="{i18n>lbl.item}" />
										</Column>
										<Column width="12em">
											<Text text="{i18n>lbl.Material}" />
										</Column>
										<Column>
											<Text text="{i18n>lbl.Shorttext}" />
										</Column>
										<Column>
											<Text text="{i18n>lbl.Quantity}" />
										</Column>
									</columns>

									<items>
										<ColumnListItem>
											<cells>
												<Text
												    text="{Posnr}" />
												<Text
													text="{Matnr}"/>
												<ObjectIdentifier
                                                    title="{Maktx}"/>
												<ObjectNumber
													number="{ path:'Lfimg', formatter:'.formatter.float'}"
													unit="{Meins}" />													
											</cells>
										</ColumnListItem>
									</items>
								</Table>
							</WizardStep>
							<WizardStep id="signReleaserStep" nextStep="signReceiverStep" title="{i18n>SignPad1Title}" icon="sap-icon://signature" 
							            validated="false" complete="onCompleteSignReleaserStep" >
			    			<MessageStrip class="sapUiSmallMarginBottom"
										text="{i18n>strip.ReleaseStorage}"
										showIcon="true"/>									
								<f:SimpleForm id="FormSigner354" editable="true" layout="ResponsiveGridLayout" title="{i18n>SignPad1Title}"
								              labelSpanL="4" labelSpanM="3" emptySpanL="2" emptySpanM="3" columnsL="1" columnsM="1">
								<f:content>									
	                              <Label text="{i18n>lbl.Signer}" required="true"/>
                                  <Input id="sName" value="{SignerName}" change="onInputChange"
									placeholder="{{i18n>placeholder.Signer}"/>                                  
	                              <Label text="{i18n>lbl.Signature}"/>
     								<C:SignPad id="signature-pad" value="{SignatureReleaser}" change="onSignChange" bgColor="#d6f5ff" width="100%"/>
								</f:content>
	 							</f:SimpleForm> 
								<HBox
										alignItems="Center"
										justifyContent="Center"
										width="100%">
									<SegmentedButton
									        selectedButton="btnClear">
	                                	<Button icon="sap-icon://reset" text="{i18n>Clear}" press="onClearButton" type="Reject" id="btnClear"/>
									</SegmentedButton>
								</HBox>		 							
							</WizardStep>							
							<WizardStep id="signReceiverStep" nextStep="showPDFStep" title="{i18n>SignPad2Title}" icon="sap-icon://signature" 
							            validated="false" complete="onCompleteSignReceiverStep">
			    			<MessageStrip class="sapUiSmallMarginBottom"
										text="{i18n>strip.ReleaseReceiver}"
										showIcon="true"/>									
								<f:Form id="FormDisplay355">
			                        <f:layout>
                                      <f:ResponsiveGridLayout labelSpanL="4" labelSpanM="3" emptySpanL="2" emptySpanM="3" columnsL="1" columnsM="1"/>
			                        </f:layout>

									<f:formContainers>
			                          <f:FormContainer>
			                            <f:formElements>
                                           <f:FormElement label="{i18n>lbl.Receiver}">
			                                <f:fields>
			                                	    <Input id="sRecvName" value="{ReceiverName}" change="onInputChange"/>
			                                </f:fields>
			                              </f:FormElement>
			                              <f:FormElement label="{i18n>lbl.Signature2}">
			                                <f:fields>
													<C:SignPad id="signature-pad2" value="{SignatureReceiver}" change="onSignChange" bgColor="#d6f5ff" width="100%"/>
			                                </f:fields>
			                              </f:FormElement>
			                              <f:FormElement label="">
			                                <SegmentedButton>
			                                	<Button icon="sap-icon://reset" text="{i18n>Clear}" press="onClearButton" type="Reject" id="btnClear2"/>
			                                </SegmentedButton>
			                                </f:FormElement>
			                            </f:formElements>
			                          </f:FormContainer>
			                        </f:formContainers>
								<!-- </f:SimpleForm> -->
								</f:Form>
							</WizardStep>
						<WizardStep id="showPDFStep" activate=".onCheckStepActivation" validated="false" title="{i18n>lastViewTitle}" icon="sap-icon://complete">
							<ScrollContainer height="100%" width="100%" horizontal="true" vertical="true">
									<FlexBox direction="Column" renderType="Div" class="sapUiSmallMargin">
										<FlexBox>
											<Button text="{i18n>pdf.Correct}" press="onCorrectPathClick"/>
											<Button text="{i18n>pdf.Incorrect}" press="onIncorrectPathClick"/>
										</FlexBox>
	                                    <PDFViewer source="{PDFUrl}" title="{/Title}" height="600px" id="PDF" displayType="Embedded" >											
											<layoutData>
												<FlexItemData growFactor="1"/>
											</layoutData>
										</PDFViewer>
									</FlexBox>
								</ScrollContainer>
						</WizardStep>
						</steps>
					</Wizard>
				</content>
				<footer>
					<Bar id="wizardFooterBar" visible="{= ${message>/}.length === 0 ? false : true}">
						<contentLeft>
							<Button id="showPopoverButton" icon="sap-icon://message-popup" text="{= ${message>/}.length }" type="Emphasized" press=".onShowMessagePopoverPress"/>
						</contentLeft>
					</Bar>
				</footer>
			</Page>

		</pages>
	</NavContainer>
</core:View>