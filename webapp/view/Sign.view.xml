<core:View xmlns:layout="sap.ui.layout" xmlns:form="sap.ui.layout.form" 
           xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" 
           xmlns:C="mit_sign.controls" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout" 
           controllerName="mit_sign.controller.Sign" xmlns:html="http://www.w3.org/1999/xhtml">	
	<NavContainer id="wizardNavContainer">
		<pages>
			<Page id="wizardContentPage" showHeader="true" title="{i18n>signTitle}  {Vbeln}">
				<landmarkInfo>
					<PageAccessibleLandmarkInfo
							rootRole="Region" rootLabel="{i18n>Checkout_rootLabel}"
							contentRole="Main" contentLabel="{i18n>Checkout_summaryContentLabel}"
							footerRole="Banner" footerLabel="{i18n>Checkout_footerLabel}"/>
				</landmarkInfo>				
				<headerContent>
					<Button id="homeButton" type="Emphasized" text="{i18n>homeButtonText}" press=".onBack"/>
					<Button id="settingsButton" type="Emphasized" text="{i18n>settingsButtonText}" press=".onSettingsButtonPress"/>
				</headerContent>
				<content>
					<Wizard id="signWizard" complete="signingCompleted" enableBranching="true" finishButtonText="{i18n>checkoutWizardReviewbtn}">
						<steps>
							<WizardStep id="contentStep" nextStep="signStep" icon="sap-icon://detail-view" complete="onCompleteSigning" validated="true" title="{i18n>contentTitle} {VBELN}">
								<List visible="true" id="lDelPos" noDataText="{i18n>homeNoData}" busyIndicatorDelay="0" 
								      items="{EventPositions}" class="sapUiForceWidthAuto sapUiResponsiveMargin">
									<headerToolbar>
									</headerToolbar>
								     <MessageStrip class="sapUiSmallMarginBottom"
										text="Überprüfung und Freigabe der Lieferung durch Ausgebender und Empfänger."
										showIcon="true"/>
									<items>
										<CustomListItem>
											<VBox class="sapUiResponsiveMargin">
												<Label text="{i18n>lbl.item} {Posnr}"/>
												<HBox>
													<Label text="{Matnr}"/>
													<Label text="{Maktx}" design="Bold" class="sapUiTinyMarginBegin"/>
												</HBox>
												<HBox>
												<Label text="{ path:'Lfimg', formatter:'.formatter.float'}"/>
												<Label text="{Meins}" class="sapUiTinyMarginBegin"/>
												</HBox>
											</VBox>
										</CustomListItem>
									</items>
								</List>
							</WizardStep>
							<WizardStep id="signStep" nextStep="signStep2" title="{i18n>SignPad1Title}" icon="sap-icon://signature" validated="false" >
								<f:Form id="FormDisplay354">
			                        <f:layout>
			                          <f:ResponsiveGridLayout labelSpanL="4" labelSpanM="3" emptySpanL="2" emptySpanM="3" columnsL="1" columnsM="1"/>
			                        </f:layout>

									<f:formContainers>
			                          <f:FormContainer>
			                            <f:formElements>
			                              <f:FormElement label="{i18n>lbl.Signer}">
			                                <f:fields>
													<Input id="sName" value="{SignerName}" change="onInputChange"/>
			                                </f:fields>
			                              </f:FormElement>
			                              <f:FormElement label="{i18n>lbl.Signature}">
			                                <f:fields>
													<C:SignPad id="signature-pad" value="{SignatureString}" change="onInputChange" bgColor="#d6f5ff" width="100%"/>
			                                </f:fields>
			                              </f:FormElement>
        									<f:FormElement label="">
			                                <f:fields>
			                                	<Button text="{i18n>Clear}" press="onResetStep1" type="Reject" id="btnClear"/>
												<Button text="{i18n>Save}" press="onCompleteStep1" type="Accept" id="btnSave"/>
			                                </f:fields>
			                                </f:FormElement>
			                            </f:formElements>
			                          </f:FormContainer>
			                        </f:formContainers>
								<!-- </f:SimpleForm> -->
								</f:Form>
							</WizardStep>							
							<WizardStep id="signStep2" nextStep="showPDFStep" title="{i18n>SignPad2Title}" icon="sap-icon://signature" validated="false">
								<f:Form id="FormDisplay355">
			                        <f:layout>
                                      <f:ResponsiveGridLayout labelSpanL="4" labelSpanM="3" emptySpanL="2" emptySpanM="3" columnsL="1" columnsM="1"/>
			                        </f:layout>

									<f:formContainers>
			                          <f:FormContainer>
			                            <f:formElements>
                                           <f:FormElement label="{i18n>lbl.Receiver}">
			                                <f:fields>
			                                	    <Input id="sRecvName" value="{ReceiverName}" change="onInputChange"/>
			                                </f:fields>
			                              </f:FormElement>
			                              <f:FormElement label="{i18n>lbl.SignatureReceiver}">
			                                <f:fields>
													<C:SignPad id="signature-pad2" value="{SignatureString2}" change="onInputChange" bgColor="#d6f5ff" width="100%"/>
			                                </f:fields>
			                              </f:FormElement>
			                              <f:FormElement label="">
			                                <f:fields>
			                                	<Button text="{i18n>Clear}" press="onClearButton" type="Reject" id="btnClear2"/>
												<Button text="{i18n>Save}" press="onSaveButton" type="Accept" id="btnSave2"/>
			                                </f:fields>
			                                </f:FormElement>
			                            </f:formElements>
			                          </f:FormContainer>
			                        </f:formContainers>
								<!-- </f:SimpleForm> -->
								</f:Form>
							</WizardStep>
						<WizardStep id="showPDFStep" activate=".onCheckStepActivation" validated="false" title="{i18n>lastViewTitle}" icon="sap-icon://complete">
							<ScrollContainer height="100%" width="100%" horizontal="true" vertical="true">
									<FlexBox direction="Column" renderType="Div" class="sapUiSmallMargin">
										<FlexBox>
											<Button text="{i18n>PDFCorrect}" press="onCorrectPathClick"/>
											<Button text="{i18n>PDFIncorrect}" press="onIncorrectPathClick"/>
										</FlexBox>
	                                    <PDFViewer source="{PDFUrl}" title="{/Title}" height="800px" id="PDF" displayType="Embedded" >											
											<layoutData>
												<FlexItemData growFactor="1"/>
											</layoutData>
										</PDFViewer>
									</FlexBox>
								</ScrollContainer>
						</WizardStep>
						</steps>
					</Wizard>
				</content>
				<footer>
					<Bar id="wizardFooterBar" visible="{= ${message>/}.length === 0 ? false : true}">
						<contentLeft>
							<Button id="showPopoverButton" icon="sap-icon://message-popup" text="{= ${message>/}.length }" type="Emphasized" press=".onShowMessagePopoverPress"/>
						</contentLeft>
					</Bar>
				</footer>
			</Page>

		</pages>
	</NavContainer>
</core:View>